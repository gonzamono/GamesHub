<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head')%>

  <body>
    <%- include('../partials/header')%>
      <main class="new-product-main">
        <div class="new-product-box">
          <h3>Edicion de producto</h3>
          <div class="edit-product-form-box">
           
            <img src=" <%= product.image %> "  class="edit-product-image" alt="imagen de juego" >
           
            <form action="/products/<%=product.id%>/edit?_method=PUT" class="edit-product-form" method="post"
              enctype="multipart/form-data">

              <div class="edit-product-div">
                <label for="new-img"class="edit-product-label">Imagen:</label>
                <input type="file" name="new-img" id="new-img" />
              </div>

              <div class="edit-product-div">
                <label for="name" class="edit-product-label">Nombre:</label>
                <input type="text" name="name" id="name" value="<%=product.name%>" />
              </div>
              <div class="edit-product-div">
                <label for="description" class="edit-product-label" >Descripcion:</label>
                <textarea type="textarea" cols="40" rows="10" name="description" id="description"
                  class="edit-product-text-area"><%=product.description%></textarea>
              </div>
            
              <div class="edit-product-div">
                <label for="category" class="edit-product-label" >Categoria</label>
                <select name="category" id="category">
                  <% for (let i=0 ; i<categories.length ; i++) {%>
                    <option value=<%=categories[i].id%> <%=product.category_id==categories[i].id ?'selected':''%> ><%= categories[i].name %></option>
                  <%}%>
                </select>
              </div>
              <div class="edit-product-div">
                <label for="console" class="edit-product-label" >Consolas compatibles:</label>
                <div class="consoleType-checkbox">
                  <% for (let i=0 ; i<consoles.length ; i++) {%>
                    <div class="consoleType-checkbox-div">
                      <input type="checkbox" name="consoles" id="<%=consoles[i].name%>" value="<%=consoles[i].id%>" 
                          <% for (let j=0 ; j<productConsolesArray.length ; j++) {%>
                                <%=productConsolesArray[j]==consoles[i].id?'checked':' '%>
                          <%}%>
                     />
                      <label for="<%=consoles[i].name%>"><%=consoles[i].name%></label>
                    </div>
                    <%}%>

                </div>
               
              </div>
              <div class="edit-product-div">
                <label for="price" class="edit-product-label" >Precio:</label>
                <input step="any" type="number" name="price" id="price" value="<%=product.value%>" />
              </div>
              <div class="edit-product-div">
                <label for="discount" class="edit-product-label" >Descuento:</label>
                <input step="any" type="number" name="discount" id="discount" value="<%=product.discount%>" />
              </div>
              <div class="edit-product-div">
                <label for="section" class="edit-product-label" >Secci√≥n</label>
                <select name="section" id="section">

                  <% for (let i=0 ; i<sections.length ; i++) {%>
                    <option value=<%=sections[i].id%> <%=product.section_id==sections[i].id ?'selected':''%> ><%= sections[i].name %></option>
                  <%}%>
                  
                </select>
              </div>
              <div class="edit-product-button">
                <button class="new-product-button" type="submit"><i class="fa-regular fa-pen-to-square"></i> Editar</button>
              </div>
              
            </form>
            <form action="/products/<%=product.id%>?_method=DELETE" method="post">
              <div class="edit-product-button">
                <button class="edit-product-delete-button" type="submit"><i class="fa-solid fa-trash"></i> Borrar</button>
              </div>
            </form>
          </div>
        </div>

      </main>
      <%- include('../partials/footer')%>
  </body>

</html>